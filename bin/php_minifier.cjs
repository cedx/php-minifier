"use strict";var Vs=Object.create;var nr=Object.defineProperty;var Ys=Object.getOwnPropertyDescriptor;var Qs=Object.getOwnPropertyNames;var Zs=Object.getPrototypeOf,Js=Object.prototype.hasOwnProperty;var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var eo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Qs(t))!Js.call(e,s)&&s!==r&&nr(e,s,{get:()=>t[s],enumerable:!(n=Ys(t,s))||n.enumerable});return e};var B=(e,t,r)=>(r=e!=null?Vs(Zs(e)):{},eo(t||!e||!e.__esModule?nr(r,"default",{value:e,enumerable:!0}):r,e));var be=v((qa,cr)=>{"use strict";var to=require("path"),Z="\\\\/",sr=`[^${Z}]`,ee="\\.",ro="\\+",no="\\?",He="\\/",so="(?=.)",or="[^/]",lt=`(?:${He}|$)`,ir=`(?:^|${He})`,ft=`${ee}{1,2}${lt}`,oo=`(?!${ee})`,io=`(?!${ir}${ft})`,ao=`(?!${ee}{0,1}${lt})`,co=`(?!${ft})`,uo=`[^.${He}]`,lo=`${or}*?`,ar={DOT_LITERAL:ee,PLUS_LITERAL:ro,QMARK_LITERAL:no,SLASH_LITERAL:He,ONE_CHAR:so,QMARK:or,END_ANCHOR:lt,DOTS_SLASH:ft,NO_DOT:oo,NO_DOTS:io,NO_DOT_SLASH:ao,NO_DOTS_SLASH:co,QMARK_NO_DOT:uo,STAR:lo,START_ANCHOR:ir},fo={...ar,SLASH_LITERAL:`[${Z}]`,QMARK:sr,STAR:`${sr}*?`,DOTS_SLASH:`${ee}{1,2}(?:[${Z}]|$)`,NO_DOT:`(?!${ee})`,NO_DOTS:`(?!(?:^|[${Z}])${ee}{1,2}(?:[${Z}]|$))`,NO_DOT_SLASH:`(?!${ee}{0,1}(?:[${Z}]|$))`,NO_DOTS_SLASH:`(?!${ee}{1,2}(?:[${Z}]|$))`,QMARK_NO_DOT:`[^.${Z}]`,START_ANCHOR:`(?:^|[${Z}])`,END_ANCHOR:`(?:[${Z}]|$)`},po={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};cr.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:po,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:to.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?fo:ar}}});var Ge=v(W=>{"use strict";var mo=require("path"),ho=process.platform==="win32",{REGEX_BACKSLASH:go,REGEX_REMOVE_BACKSLASH:yo,REGEX_SPECIAL_CHARS:bo,REGEX_SPECIAL_CHARS_GLOBAL:xo}=be();W.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);W.hasRegexChars=e=>bo.test(e);W.isRegexChar=e=>e.length===1&&W.hasRegexChars(e);W.escapeRegex=e=>e.replace(xo,"\\$1");W.toPosixSlashes=e=>e.replace(go,"/");W.removeBackslashes=e=>e.replace(yo,t=>t==="\\"?"":t);W.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};W.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:ho===!0||mo.sep==="\\";W.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?W.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};W.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};W.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",s=r.contains?"":"$",o=`${n}(?:${e})${s}`;return t.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var gr=v((Ka,hr)=>{"use strict";var ur=Ge(),{CHAR_ASTERISK:pt,CHAR_AT:Eo,CHAR_BACKWARD_SLASH:xe,CHAR_COMMA:So,CHAR_DOT:dt,CHAR_EXCLAMATION_MARK:mt,CHAR_FORWARD_SLASH:mr,CHAR_LEFT_CURLY_BRACE:ht,CHAR_LEFT_PARENTHESES:gt,CHAR_LEFT_SQUARE_BRACKET:wo,CHAR_PLUS:Ao,CHAR_QUESTION_MARK:lr,CHAR_RIGHT_CURLY_BRACE:Ro,CHAR_RIGHT_PARENTHESES:fr,CHAR_RIGHT_SQUARE_BRACKET:_o}=be(),pr=e=>e===mr||e===xe,dr=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},Co=(e,t)=>{let r=t||{},n=e.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],i=[],l=[],p=e,h=-1,m=0,E=0,S=!1,R=!1,y=!1,w=!1,F=!1,U=!1,M=!1,C=!1,K=!1,N=!1,V=0,G,g,_={value:"",depth:0,isGlob:!1},D=()=>h>=n,u=()=>p.charCodeAt(h+1),I=()=>(G=g,p.charCodeAt(++h));for(;h<n;){g=I();let j;if(g===xe){M=_.backslashes=!0,g=I(),g===ht&&(U=!0);continue}if(U===!0||g===ht){for(V++;D()!==!0&&(g=I());){if(g===xe){M=_.backslashes=!0,I();continue}if(g===ht){V++;continue}if(U!==!0&&g===dt&&(g=I())===dt){if(S=_.isBrace=!0,y=_.isGlob=!0,N=!0,s===!0)continue;break}if(U!==!0&&g===So){if(S=_.isBrace=!0,y=_.isGlob=!0,N=!0,s===!0)continue;break}if(g===Ro&&(V--,V===0)){U=!1,S=_.isBrace=!0,N=!0;break}}if(s===!0)continue;break}if(g===mr){if(o.push(h),i.push(_),_={value:"",depth:0,isGlob:!1},N===!0)continue;if(G===dt&&h===m+1){m+=2;continue}E=h+1;continue}if(r.noext!==!0&&(g===Ao||g===Eo||g===pt||g===lr||g===mt)===!0&&u()===gt){if(y=_.isGlob=!0,w=_.isExtglob=!0,N=!0,g===mt&&h===m&&(K=!0),s===!0){for(;D()!==!0&&(g=I());){if(g===xe){M=_.backslashes=!0,g=I();continue}if(g===fr){y=_.isGlob=!0,N=!0;break}}continue}break}if(g===pt){if(G===pt&&(F=_.isGlobstar=!0),y=_.isGlob=!0,N=!0,s===!0)continue;break}if(g===lr){if(y=_.isGlob=!0,N=!0,s===!0)continue;break}if(g===wo){for(;D()!==!0&&(j=I());){if(j===xe){M=_.backslashes=!0,I();continue}if(j===_o){R=_.isBracket=!0,y=_.isGlob=!0,N=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&g===mt&&h===m){C=_.negated=!0,m++;continue}if(r.noparen!==!0&&g===gt){if(y=_.isGlob=!0,s===!0){for(;D()!==!0&&(g=I());){if(g===gt){M=_.backslashes=!0,g=I();continue}if(g===fr){N=!0;break}}continue}break}if(y===!0){if(N=!0,s===!0)continue;break}}r.noext===!0&&(w=!1,y=!1);let $=p,te="",a="";m>0&&(te=p.slice(0,m),p=p.slice(m),E-=m),$&&y===!0&&E>0?($=p.slice(0,E),a=p.slice(E)):y===!0?($="",a=p):$=p,$&&$!==""&&$!=="/"&&$!==p&&pr($.charCodeAt($.length-1))&&($=$.slice(0,-1)),r.unescape===!0&&(a&&(a=ur.removeBackslashes(a)),$&&M===!0&&($=ur.removeBackslashes($)));let c={prefix:te,input:e,start:m,base:$,glob:a,isBrace:S,isBracket:R,isGlob:y,isExtglob:w,isGlobstar:F,negated:C,negatedExtglob:K};if(r.tokens===!0&&(c.maxDepth=0,pr(g)||i.push(_),c.tokens=i),r.parts===!0||r.tokens===!0){let j;for(let A=0;A<o.length;A++){let Y=j?j+1:m,Q=o[A],X=e.slice(Y,Q);r.tokens&&(A===0&&m!==0?(i[A].isPrefix=!0,i[A].value=te):i[A].value=X,dr(i[A]),c.maxDepth+=i[A].depth),(A!==0||X!=="")&&l.push(X),j=Q}if(j&&j+1<e.length){let A=e.slice(j+1);l.push(A),r.tokens&&(i[i.length-1].value=A,dr(i[i.length-1]),c.maxDepth+=i[i.length-1].depth)}c.slashes=o,c.parts=l}return c};hr.exports=Co});var xr=v((Xa,br)=>{"use strict";var Be=be(),z=Ge(),{MAX_LENGTH:De,POSIX_REGEX_SOURCE:To,REGEX_NON_SPECIAL_CHARS:vo,REGEX_SPECIAL_CHARS_BACKREF:Po,REPLACEMENTS:yr}=Be,$o=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(s=>z.escapeRegex(s)).join("..")}return r},ie=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,yt=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=yr[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(De,r.maxLength):De,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},i=[o],l=r.capture?"":"?:",p=z.isWindows(t),h=Be.globChars(p),m=Be.extglobChars(h),{DOT_LITERAL:E,PLUS_LITERAL:S,SLASH_LITERAL:R,ONE_CHAR:y,DOTS_SLASH:w,NO_DOT:F,NO_DOT_SLASH:U,NO_DOTS_SLASH:M,QMARK:C,QMARK_NO_DOT:K,STAR:N,START_ANCHOR:V}=h,G=d=>`(${l}(?:(?!${V}${d.dot?w:E}).)*?)`,g=r.dot?"":F,_=r.dot?C:K,D=r.bash===!0?G(r):N;r.capture&&(D=`(${D})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let u={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:i};e=z.removePrefix(e,u),s=e.length;let I=[],$=[],te=[],a=o,c,j=()=>u.index===s-1,A=u.peek=(d=1)=>e[u.index+d],Y=u.advance=()=>e[++u.index]||"",Q=()=>e.slice(u.index+1),X=(d="",O=0)=>{u.consumed+=d,u.index+=O},Ie=d=>{u.output+=d.output!=null?d.output:d.value,X(d.value)},Xs=()=>{let d=1;for(;A()==="!"&&(A(2)!=="("||A(3)==="?");)Y(),u.start++,d++;return d%2===0?!1:(u.negated=!0,u.start++,!0)},Le=d=>{u[d]++,te.push(d)},re=d=>{u[d]--,te.pop()},x=d=>{if(a.type==="globstar"){let O=u.braces>0&&(d.type==="comma"||d.type==="brace"),f=d.extglob===!0||I.length&&(d.type==="pipe"||d.type==="paren");d.type!=="slash"&&d.type!=="paren"&&!O&&!f&&(u.output=u.output.slice(0,-a.output.length),a.type="star",a.value="*",a.output=D,u.output+=a.output)}if(I.length&&d.type!=="paren"&&(I[I.length-1].inner+=d.value),(d.value||d.output)&&Ie(d),a&&a.type==="text"&&d.type==="text"){a.value+=d.value,a.output=(a.output||"")+d.value;return}d.prev=a,i.push(d),a=d},ke=(d,O)=>{let f={...m[O],conditions:1,inner:""};f.prev=a,f.parens=u.parens,f.output=u.output;let b=(r.capture?"(":"")+f.open;Le("parens"),x({type:d,value:O,output:u.output?"":y}),x({type:"paren",extglob:!0,value:Y(),output:b}),I.push(f)},zs=d=>{let O=d.close+(r.capture?")":""),f;if(d.type==="negate"){let b=D;if(d.inner&&d.inner.length>1&&d.inner.includes("/")&&(b=G(r)),(b!==D||j()||/^\)+$/.test(Q()))&&(O=d.close=`)$))${b}`),d.inner.includes("*")&&(f=Q())&&/^\.[^\\/.]+$/.test(f)){let L=yt(f,{...t,fastpaths:!1}).output;O=d.close=`)${L})${b})`}d.prev.type==="bos"&&(u.negatedExtglob=!0)}x({type:"paren",extglob:!0,value:c,output:O}),re("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let d=!1,O=e.replace(Po,(f,b,L,q,H,ut)=>q==="\\"?(d=!0,f):q==="?"?b?b+q+(H?C.repeat(H.length):""):ut===0?_+(H?C.repeat(H.length):""):C.repeat(L.length):q==="."?E.repeat(L.length):q==="*"?b?b+q+(H?D:""):D:b?f:`\\${f}`);return d===!0&&(r.unescape===!0?O=O.replace(/\\/g,""):O=O.replace(/\\+/g,f=>f.length%2===0?"\\\\":f?"\\":"")),O===e&&r.contains===!0?(u.output=e,u):(u.output=z.wrapOutput(O,u,t),u)}for(;!j();){if(c=Y(),c==="\0")continue;if(c==="\\"){let f=A();if(f==="/"&&r.bash!==!0||f==="."||f===";")continue;if(!f){c+="\\",x({type:"text",value:c});continue}let b=/^\\+/.exec(Q()),L=0;if(b&&b[0].length>2&&(L=b[0].length,u.index+=L,L%2!==0&&(c+="\\")),r.unescape===!0?c=Y():c+=Y(),u.brackets===0){x({type:"text",value:c});continue}}if(u.brackets>0&&(c!=="]"||a.value==="["||a.value==="[^")){if(r.posix!==!1&&c===":"){let f=a.value.slice(1);if(f.includes("[")&&(a.posix=!0,f.includes(":"))){let b=a.value.lastIndexOf("["),L=a.value.slice(0,b),q=a.value.slice(b+2),H=To[q];if(H){a.value=L+H,u.backtrack=!0,Y(),!o.output&&i.indexOf(a)===1&&(o.output=y);continue}}}(c==="["&&A()!==":"||c==="-"&&A()==="]")&&(c=`\\${c}`),c==="]"&&(a.value==="["||a.value==="[^")&&(c=`\\${c}`),r.posix===!0&&c==="!"&&a.value==="["&&(c="^"),a.value+=c,Ie({value:c});continue}if(u.quotes===1&&c!=='"'){c=z.escapeRegex(c),a.value+=c,Ie({value:c});continue}if(c==='"'){u.quotes=u.quotes===1?0:1,r.keepQuotes===!0&&x({type:"text",value:c});continue}if(c==="("){Le("parens"),x({type:"paren",value:c});continue}if(c===")"){if(u.parens===0&&r.strictBrackets===!0)throw new SyntaxError(ie("opening","("));let f=I[I.length-1];if(f&&u.parens===f.parens+1){zs(I.pop());continue}x({type:"paren",value:c,output:u.parens?")":"\\)"}),re("parens");continue}if(c==="["){if(r.nobracket===!0||!Q().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(ie("closing","]"));c=`\\${c}`}else Le("brackets");x({type:"bracket",value:c});continue}if(c==="]"){if(r.nobracket===!0||a&&a.type==="bracket"&&a.value.length===1){x({type:"text",value:c,output:`\\${c}`});continue}if(u.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(ie("opening","["));x({type:"text",value:c,output:`\\${c}`});continue}re("brackets");let f=a.value.slice(1);if(a.posix!==!0&&f[0]==="^"&&!f.includes("/")&&(c=`/${c}`),a.value+=c,Ie({value:c}),r.literalBrackets===!1||z.hasRegexChars(f))continue;let b=z.escapeRegex(a.value);if(u.output=u.output.slice(0,-a.value.length),r.literalBrackets===!0){u.output+=b,a.value=b;continue}a.value=`(${l}${b}|${a.value})`,u.output+=a.value;continue}if(c==="{"&&r.nobrace!==!0){Le("braces");let f={type:"brace",value:c,output:"(",outputIndex:u.output.length,tokensIndex:u.tokens.length};$.push(f),x(f);continue}if(c==="}"){let f=$[$.length-1];if(r.nobrace===!0||!f){x({type:"text",value:c,output:c});continue}let b=")";if(f.dots===!0){let L=i.slice(),q=[];for(let H=L.length-1;H>=0&&(i.pop(),L[H].type!=="brace");H--)L[H].type!=="dots"&&q.unshift(L[H].value);b=$o(q,r),u.backtrack=!0}if(f.comma!==!0&&f.dots!==!0){let L=u.output.slice(0,f.outputIndex),q=u.tokens.slice(f.tokensIndex);f.value=f.output="\\{",c=b="\\}",u.output=L;for(let H of q)u.output+=H.output||H.value}x({type:"brace",value:c,output:b}),re("braces"),$.pop();continue}if(c==="|"){I.length>0&&I[I.length-1].conditions++,x({type:"text",value:c});continue}if(c===","){let f=c,b=$[$.length-1];b&&te[te.length-1]==="braces"&&(b.comma=!0,f="|"),x({type:"comma",value:c,output:f});continue}if(c==="/"){if(a.type==="dot"&&u.index===u.start+1){u.start=u.index+1,u.consumed="",u.output="",i.pop(),a=o;continue}x({type:"slash",value:c,output:R});continue}if(c==="."){if(u.braces>0&&a.type==="dot"){a.value==="."&&(a.output=E);let f=$[$.length-1];a.type="dots",a.output+=c,a.value+=c,f.dots=!0;continue}if(u.braces+u.parens===0&&a.type!=="bos"&&a.type!=="slash"){x({type:"text",value:c,output:E});continue}x({type:"dot",value:c,output:E});continue}if(c==="?"){if(!(a&&a.value==="(")&&r.noextglob!==!0&&A()==="("&&A(2)!=="?"){ke("qmark",c);continue}if(a&&a.type==="paren"){let b=A(),L=c;if(b==="<"&&!z.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(a.value==="("&&!/[!=<:]/.test(b)||b==="<"&&!/<([!=]|\w+>)/.test(Q()))&&(L=`\\${c}`),x({type:"text",value:c,output:L});continue}if(r.dot!==!0&&(a.type==="slash"||a.type==="bos")){x({type:"qmark",value:c,output:K});continue}x({type:"qmark",value:c,output:C});continue}if(c==="!"){if(r.noextglob!==!0&&A()==="("&&(A(2)!=="?"||!/[!=<:]/.test(A(3)))){ke("negate",c);continue}if(r.nonegate!==!0&&u.index===0){Xs();continue}}if(c==="+"){if(r.noextglob!==!0&&A()==="("&&A(2)!=="?"){ke("plus",c);continue}if(a&&a.value==="("||r.regex===!1){x({type:"plus",value:c,output:S});continue}if(a&&(a.type==="bracket"||a.type==="paren"||a.type==="brace")||u.parens>0){x({type:"plus",value:c});continue}x({type:"plus",value:S});continue}if(c==="@"){if(r.noextglob!==!0&&A()==="("&&A(2)!=="?"){x({type:"at",extglob:!0,value:c,output:""});continue}x({type:"text",value:c});continue}if(c!=="*"){(c==="$"||c==="^")&&(c=`\\${c}`);let f=vo.exec(Q());f&&(c+=f[0],u.index+=f[0].length),x({type:"text",value:c});continue}if(a&&(a.type==="globstar"||a.star===!0)){a.type="star",a.star=!0,a.value+=c,a.output=D,u.backtrack=!0,u.globstar=!0,X(c);continue}let d=Q();if(r.noextglob!==!0&&/^\([^?]/.test(d)){ke("star",c);continue}if(a.type==="star"){if(r.noglobstar===!0){X(c);continue}let f=a.prev,b=f.prev,L=f.type==="slash"||f.type==="bos",q=b&&(b.type==="star"||b.type==="globstar");if(r.bash===!0&&(!L||d[0]&&d[0]!=="/")){x({type:"star",value:c,output:""});continue}let H=u.braces>0&&(f.type==="comma"||f.type==="brace"),ut=I.length&&(f.type==="pipe"||f.type==="paren");if(!L&&f.type!=="paren"&&!H&&!ut){x({type:"star",value:c,output:""});continue}for(;d.slice(0,3)==="/**";){let Ne=e[u.index+4];if(Ne&&Ne!=="/")break;d=d.slice(3),X("/**",3)}if(f.type==="bos"&&j()){a.type="globstar",a.value+=c,a.output=G(r),u.output=a.output,u.globstar=!0,X(c);continue}if(f.type==="slash"&&f.prev.type!=="bos"&&!q&&j()){u.output=u.output.slice(0,-(f.output+a.output).length),f.output=`(?:${f.output}`,a.type="globstar",a.output=G(r)+(r.strictSlashes?")":"|$)"),a.value+=c,u.globstar=!0,u.output+=f.output+a.output,X(c);continue}if(f.type==="slash"&&f.prev.type!=="bos"&&d[0]==="/"){let Ne=d[1]!==void 0?"|$":"";u.output=u.output.slice(0,-(f.output+a.output).length),f.output=`(?:${f.output}`,a.type="globstar",a.output=`${G(r)}${R}|${R}${Ne})`,a.value+=c,u.output+=f.output+a.output,u.globstar=!0,X(c+Y()),x({type:"slash",value:"/",output:""});continue}if(f.type==="bos"&&d[0]==="/"){a.type="globstar",a.value+=c,a.output=`(?:^|${R}|${G(r)}${R})`,u.output=a.output,u.globstar=!0,X(c+Y()),x({type:"slash",value:"/",output:""});continue}u.output=u.output.slice(0,-a.output.length),a.type="globstar",a.output=G(r),a.value+=c,u.output+=a.output,u.globstar=!0,X(c);continue}let O={type:"star",value:c,output:D};if(r.bash===!0){O.output=".*?",(a.type==="bos"||a.type==="slash")&&(O.output=g+O.output),x(O);continue}if(a&&(a.type==="bracket"||a.type==="paren")&&r.regex===!0){O.output=c,x(O);continue}(u.index===u.start||a.type==="slash"||a.type==="dot")&&(a.type==="dot"?(u.output+=U,a.output+=U):r.dot===!0?(u.output+=M,a.output+=M):(u.output+=g,a.output+=g),A()!=="*"&&(u.output+=y,a.output+=y)),x(O)}for(;u.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(ie("closing","]"));u.output=z.escapeLast(u.output,"["),re("brackets")}for(;u.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(ie("closing",")"));u.output=z.escapeLast(u.output,"("),re("parens")}for(;u.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(ie("closing","}"));u.output=z.escapeLast(u.output,"{"),re("braces")}if(r.strictSlashes!==!0&&(a.type==="star"||a.type==="bracket")&&x({type:"maybe_slash",value:"",output:`${R}?`}),u.backtrack===!0){u.output="";for(let d of u.tokens)u.output+=d.output!=null?d.output:d.value,d.suffix&&(u.output+=d.suffix)}return u};yt.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(De,r.maxLength):De,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);e=yr[e]||e;let o=z.isWindows(t),{DOT_LITERAL:i,SLASH_LITERAL:l,ONE_CHAR:p,DOTS_SLASH:h,NO_DOT:m,NO_DOTS:E,NO_DOTS_SLASH:S,STAR:R,START_ANCHOR:y}=Be.globChars(o),w=r.dot?E:m,F=r.dot?S:m,U=r.capture?"":"?:",M={negated:!1,prefix:""},C=r.bash===!0?".*?":R;r.capture&&(C=`(${C})`);let K=g=>g.noglobstar===!0?C:`(${U}(?:(?!${y}${g.dot?h:i}).)*?)`,N=g=>{switch(g){case"*":return`${w}${p}${C}`;case".*":return`${i}${p}${C}`;case"*.*":return`${w}${C}${i}${p}${C}`;case"*/*":return`${w}${C}${l}${p}${F}${C}`;case"**":return w+K(r);case"**/*":return`(?:${w}${K(r)}${l})?${F}${p}${C}`;case"**/*.*":return`(?:${w}${K(r)}${l})?${F}${C}${i}${p}${C}`;case"**/.*":return`(?:${w}${K(r)}${l})?${i}${p}${C}`;default:{let _=/^(.*?)\.(\w+)$/.exec(g);if(!_)return;let D=N(_[1]);return D?D+i+_[2]:void 0}}},V=z.removePrefix(e,M),G=N(V);return G&&r.strictSlashes!==!0&&(G+=`${l}?`),G};br.exports=yt});var Sr=v((za,Er)=>{"use strict";var Oo=require("path"),Io=gr(),bt=xr(),xt=Ge(),Lo=be(),ko=e=>e&&typeof e=="object"&&!Array.isArray(e),k=(e,t,r=!1)=>{if(Array.isArray(e)){let m=e.map(S=>k(S,t,r));return S=>{for(let R of m){let y=R(S);if(y)return y}return!1}}let n=ko(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let s=t||{},o=xt.isWindows(t),i=n?k.compileRe(e,t):k.makeRe(e,t,!1,!0),l=i.state;delete i.state;let p=()=>!1;if(s.ignore){let m={...t,ignore:null,onMatch:null,onResult:null};p=k(s.ignore,m,r)}let h=(m,E=!1)=>{let{isMatch:S,match:R,output:y}=k.test(m,i,t,{glob:e,posix:o}),w={glob:e,state:l,regex:i,posix:o,input:m,output:y,match:R,isMatch:S};return typeof s.onResult=="function"&&s.onResult(w),S===!1?(w.isMatch=!1,E?w:!1):p(m)?(typeof s.onIgnore=="function"&&s.onIgnore(w),w.isMatch=!1,E?w:!1):(typeof s.onMatch=="function"&&s.onMatch(w),E?w:!0)};return r&&(h.state=l),h};k.test=(e,t,r,{glob:n,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let o=r||{},i=o.format||(s?xt.toPosixSlashes:null),l=e===n,p=l&&i?i(e):e;return l===!1&&(p=i?i(e):e,l=p===n),(l===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?l=k.matchBase(e,t,r,s):l=t.exec(p)),{isMatch:!!l,match:l,output:p}};k.matchBase=(e,t,r,n=xt.isWindows(r))=>(t instanceof RegExp?t:k.makeRe(t,r)).test(Oo.basename(e));k.isMatch=(e,t,r)=>k(t,r)(e);k.parse=(e,t)=>Array.isArray(e)?e.map(r=>k.parse(r,t)):bt(e,{...t,fastpaths:!1});k.scan=(e,t)=>Io(e,t);k.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let s=t||{},o=s.contains?"":"^",i=s.contains?"":"$",l=`${o}(?:${e.output})${i}`;e&&e.negated===!0&&(l=`^(?!${l}).*$`);let p=k.toRegex(l,t);return n===!0&&(p.state=e),p};k.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=bt.fastpaths(e,t)),s.output||(s=bt(e,t)),k.compileRe(s,t,r,n)};k.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};k.constants=Lo;Er.exports=k});var Ar=v((Va,wr)=>{"use strict";wr.exports=Sr()});var Or=v((Ya,$r)=>{"use strict";var Se=require("fs"),{Readable:No}=require("stream"),Ee=require("path"),{promisify:je}=require("util"),Et=Ar(),Ho=je(Se.readdir),Go=je(Se.stat),Rr=je(Se.lstat),Bo=je(Se.realpath),Do="!",vr="READDIRP_RECURSIVE_ERROR",Mo=new Set(["ENOENT","EPERM","EACCES","ELOOP",vr]),St="files",Pr="directories",Fe="files_directories",Me="all",_r=[St,Pr,Fe,Me],Fo=e=>Mo.has(e.code),[Cr,Uo]=process.versions.node.split(".").slice(0,2).map(e=>Number.parseInt(e,10)),jo=process.platform==="win32"&&(Cr>10||Cr===10&&Uo>=5),Tr=e=>{if(e!==void 0){if(typeof e=="function")return e;if(typeof e=="string"){let t=Et(e.trim());return r=>t(r.basename)}if(Array.isArray(e)){let t=[],r=[];for(let n of e){let s=n.trim();s.charAt(0)===Do?r.push(Et(s.slice(1))):t.push(Et(s))}return r.length>0?t.length>0?n=>t.some(s=>s(n.basename))&&!r.some(s=>s(n.basename)):n=>!r.some(s=>s(n.basename)):n=>t.some(s=>s(n.basename))}}},Ue=class e extends No{static get defaultOptions(){return{root:".",fileFilter:t=>!0,directoryFilter:t=>!0,type:St,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(t={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:t.highWaterMark||4096});let r={...e.defaultOptions,...t},{root:n,type:s}=r;this._fileFilter=Tr(r.fileFilter),this._directoryFilter=Tr(r.directoryFilter);let o=r.lstat?Rr:Go;jo?this._stat=i=>o(i,{bigint:!0}):this._stat=o,this._maxDepth=r.depth,this._wantsDir=[Pr,Fe,Me].includes(s),this._wantsFile=[St,Fe,Me].includes(s),this._wantsEverything=s===Me,this._root=Ee.resolve(n),this._isDirent="Dirent"in Se&&!r.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0}async _read(t){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&t>0;){let{path:r,depth:n,files:s=[]}=this.parent||{};if(s.length>0){let o=s.splice(0,t).map(i=>this._formatEntry(i,r));for(let i of await Promise.all(o)){if(this.destroyed)return;let l=await this._getEntryType(i);l==="directory"&&this._directoryFilter(i)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(i.fullPath,n+1)),this._wantsDir&&(this.push(i),t--)):(l==="file"||this._includeAsFile(i))&&this._fileFilter(i)&&this._wantsFile&&(this.push(i),t--)}}else{let o=this.parents.pop();if(!o){this.push(null);break}if(this.parent=await o,this.destroyed)return}}}catch(r){this.destroy(r)}finally{this.reading=!1}}}async _exploreDir(t,r){let n;try{n=await Ho(t,this._rdOptions)}catch(s){this._onError(s)}return{files:n,depth:r,path:t}}async _formatEntry(t,r){let n;try{let s=this._isDirent?t.name:t,o=Ee.resolve(Ee.join(r,s));n={path:Ee.relative(this._root,o),fullPath:o,basename:s},n[this._statsProp]=this._isDirent?t:await this._stat(o)}catch(s){this._onError(s)}return n}_onError(t){Fo(t)&&!this.destroyed?this.emit("warn",t):this.destroy(t)}async _getEntryType(t){let r=t&&t[this._statsProp];if(r){if(r.isFile())return"file";if(r.isDirectory())return"directory";if(r&&r.isSymbolicLink()){let n=t.fullPath;try{let s=await Bo(n),o=await Rr(s);if(o.isFile())return"file";if(o.isDirectory()){let i=s.length;if(n.startsWith(s)&&n.substr(i,1)===Ee.sep){let l=new Error(`Circular symlink detected: "${n}" points to "${s}"`);return l.code=vr,this._onError(l)}return"directory"}}catch(s){this._onError(s)}}}}_includeAsFile(t){let r=t&&t[this._statsProp];return r&&this._wantsEverything&&!r.isDirectory()}},ae=(e,t={})=>{let r=t.entryType||t.type;if(r==="both"&&(r=Fe),r&&(t.type=r),e){if(typeof e!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!_r.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${_r.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return t.root=e,new Ue(t)},qo=(e,t={})=>new Promise((r,n)=>{let s=[];ae(e,t).on("data",o=>s.push(o)).on("end",()=>r(s)).on("error",o=>n(o))});ae.promise=qo;ae.ReaddirpStream=Ue;ae.default=ae;$r.exports=ae});var Hr=v((Ja,Nr)=>{Nr.exports=kr({alwaysReturn:!0},kr);function ce(e,t){return e.level=0,e.hasBasic=!1,e.has256=!1,e.has16m=!1,t.alwaysReturn?e:!1}function qe(e){return e.hasBasic=!0,e.has256=!1,e.has16m=!1,e.level=1,e}function ue(e){return e.hasBasic=!0,e.has256=!0,e.has16m=!1,e.level=2,e}function We(e){return e.hasBasic=!0,e.has256=!0,e.has16m=!0,e.level=3,e}function kr(e,t){if(e=e||{},t=t||{},typeof e.level=="number")switch(e.level){case 0:return ce(t,e);case 1:return qe(t);case 2:return ue(t);case 3:return We(t)}if(t.level=0,t.hasBasic=!1,t.has256=!1,t.has16m=!1,typeof process>"u"||!process||!process.stdout||!process.env||!process.platform)return ce(t,e);var r=e.env||process.env,n=e.stream||process.stdout,s=e.term||r.TERM||"",o=e.platform||process.platform;if(!e.ignoreTTY&&!n.isTTY||!e.ignoreDumb&&s==="dumb"&&!r.COLORTERM)return ce(t,e);if(o==="win32")return qe(t);if(r.TMUX)return ue(t);if(!e.ignoreCI&&(r.CI||r.TEAMCITY_VERSION))return r.TRAVIS?ue(t):ce(t,e);switch(r.TERM_PROGRAM){case"iTerm.app":var i=r.TERM_PROGRAM_VERSION||"0.";return/^[0-2]\./.test(i)?ue(t):We(t);case"HyperTerm":case"Hyper":return We(t);case"MacTerm":return We(t);case"Apple_Terminal":return ue(t)}return/^xterm-256/.test(s)?ue(t):/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(s)||r.COLORTERM?qe(t):ce(t,e)}});var Mr=v((ec,le)=>{"use strict";var Br=require("util"),Ko=require("console").Console,Xo=Hr(),J=new Ko({stdout:process.stdout,stderr:process.stderr,colorMode:!1});function Gr(e){return process.argv.indexOf("--"+e)!==-1}function zo(){return Gr("no-color")?!1:!!(Gr("color")||Xo())}function Dr(){this.now=new Date}Dr.prototype[Br.inspect.custom]=function(e,t){var r=this.now.toLocaleTimeString("en",{hour12:!1});return"["+t.stylize(r,"date")+"]"};function we(){return Br.inspect(new Dr,{colors:zo()})}function Vo(){var e=we();return process.stdout.write(e+" "),J.log.apply(J,arguments),this}function Yo(){var e=we();return process.stdout.write(e+" "),J.info.apply(J,arguments),this}function Qo(){var e=we();return process.stdout.write(e+" "),J.dir.apply(J,arguments),this}function Zo(){var e=we();return process.stderr.write(e+" "),J.warn.apply(J,arguments),this}function Jo(){var e=we();return process.stderr.write(e+" "),J.error.apply(J,arguments),this}le.exports=Vo;le.exports.info=Yo;le.exports.dir=Qo;le.exports.warn=Zo;le.exports.error=Jo});var Ur=v((tc,Fr)=>{"use strict";Fr.exports=function(e,t,r){return"\x1B["+e+"m"+r+"\x1B["+t+"m"}});var jr=v(T=>{"use strict";var P=Ur();T.bgblack=function(t){return P(40,49,t)};T.bgblue=function(t){return P(44,49,t)};T.bgcyan=function(t){return P(46,49,t)};T.bggreen=function(t){return P(42,49,t)};T.bgmagenta=function(t){return P(45,49,t)};T.bgred=function(t){return P(41,49,t)};T.bgwhite=function(t){return P(47,49,t)};T.bgyellow=function(t){return P(43,49,t)};T.black=function(t){return P(30,39,t)};T.blue=function(t){return P(34,39,t)};T.bold=function(t){return P(1,22,t)};T.cyan=function(t){return P(36,39,t)};T.dim=function(t){return P(2,22,t)};T.gray=function(t){return P(90,39,t)};T.green=function(t){return P(32,39,t)};T.grey=function(t){return P(90,39,t)};T.hidden=function(t){return P(8,28,t)};T.inverse=function(t){return P(7,27,t)};T.italic=function(t){return P(3,23,t)};T.magenta=function(t){return P(35,39,t)};T.red=function(t){return P(31,39,t)};T.reset=function(t){return P(0,0,t)};T.strikethrough=function(t){return P(9,29,t)};T.underline=function(t){return P(4,24,t)};T.white=function(t){return P(37,39,t)};T.yellow=function(t){return P(33,39,t)}});var Vr=v((nc,zr)=>{var ei=require("util"),qr=jr(),Xr=["message","name","stack"],ti=new Set(Xr.concat(["__safety","_stack","plugin","showProperties","showStack","domain","domainEmitter","domainThrown"])),ri=["fileName","lineNumber","message","name","plugin","showProperties","showStack","stack"];function ne(e,t,r){if(!(this instanceof ne))return new ne(e,t,r);Error.call(this);var n=ni(e,t,r),s=this;if(typeof n.error=="object"){var o=new Set(Object.keys(n.error).concat(Xr));o.forEach(function(l){s[l]=n.error[l]})}if(ri.forEach(function(l){l in n&&(this[l]=n[l])},this),!this.stack){var i={};i.toString=function(){return this._messageWithDetails()+`
Stack:`}.bind(this),Error.captureStackTrace(i,arguments.callee||this.constructor),this.__safety=i}if(!this.plugin)throw new Error("Missing plugin name");if(!this.message)throw new Error("Missing error message")}ei.inherits(ne,Error);ne.prototype._messageWithDetails=function(){var e=`Message:
    `+this.message,t=this._messageDetails();return t!==""&&(e+=`
`+t),e};ne.prototype._messageDetails=function(){if(!this.showProperties)return"";var e=Object.keys(this).filter(function(o){return!ti.has(o)}),t=e.length;if(t===0)return"";for(var r="",n=0;t--;){var s=e[n++];r+="    ",r+=s+": "+this[s],r+=`
`}return`Details:
`+r};ne.prototype.toString=function(){var e=function(r){return this._messageWithDetails()+`
Stack:
`+r}.bind(this),t="";return this.showStack?(this.__safety?t=this.__safety.stack:this._stack?t=e(this._stack):t=e(this.stack),Wr(t,this)):(t=this._messageWithDetails(),Wr(t,this))};function Wr(e,t){var r=qr.red(t.name);return r+=" in plugin ",r+='"'+qr.cyan(t.plugin)+'"',r+=`
`,r+=e,r}function ni(e,t,r){return typeof e=="object"?Kr(e):(t instanceof Error?r=Object.assign({},r,{error:t}):typeof t=="object"?r=Object.assign({},t):r=Object.assign({},r,{message:t}),r.plugin=e,Kr(r))}function Kr(e){return Object.assign({showStack:!1,showProperties:!0},e)}zr.exports=ne});var en=v((sc,Jr)=>{Jr.exports=Zr;Zr.sync=oi;var Yr=require("fs");function si(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var s=r[n].toLowerCase();if(s&&e.substr(-s.length).toLowerCase()===s)return!0}return!1}function Qr(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:si(t,r)}function Zr(e,t,r){Yr.stat(e,function(n,s){r(n,n?!1:Qr(s,e,t))})}function oi(e,t){return Qr(Yr.statSync(e),e,t)}});var on=v((oc,sn)=>{sn.exports=rn;rn.sync=ii;var tn=require("fs");function rn(e,t,r){tn.stat(e,function(n,s){r(n,n?!1:nn(s,t))})}function ii(e,t){return nn(tn.statSync(e),t)}function nn(e,t){return e.isFile()&&ai(e,t)}function ai(e,t){var r=e.mode,n=e.uid,s=e.gid,o=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),l=parseInt("100",8),p=parseInt("010",8),h=parseInt("001",8),m=l|p,E=r&h||r&p&&s===i||r&l&&n===o||r&m&&o===0;return E}});var cn=v((ac,an)=>{var ic=require("fs"),Ke;process.platform==="win32"||global.TESTING_WINDOWS?Ke=en():Ke=on();an.exports=wt;wt.sync=ci;function wt(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){wt(e,t||{},function(o,i){o?s(o):n(i)})})}Ke(e,t||{},function(n,s){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,s=!1),r(n,s)})}function ci(e,t){try{return Ke.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var hn=v((cc,mn)=>{var fe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",un=require("path"),ui=fe?";":":",ln=cn(),fn=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),pn=(e,t)=>{let r=t.colon||ui,n=e.match(/\//)||fe&&e.match(/\\/)?[""]:[...fe?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],s=fe?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=fe?s.split(r):[""];return fe&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:s}},dn=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:s,pathExtExe:o}=pn(e,t),i=[],l=h=>new Promise((m,E)=>{if(h===n.length)return t.all&&i.length?m(i):E(fn(e));let S=n[h],R=/^".*"$/.test(S)?S.slice(1,-1):S,y=un.join(R,e),w=!R&&/^\.[\\\/]/.test(e)?e.slice(0,2)+y:y;m(p(w,h,0))}),p=(h,m,E)=>new Promise((S,R)=>{if(E===s.length)return S(l(m+1));let y=s[E];ln(h+y,{pathExt:o},(w,F)=>{if(!w&&F)if(t.all)i.push(h+y);else return S(h+y);return S(p(h,m,E+1))})});return r?l(0).then(h=>r(null,h),r):l(0)},li=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:s}=pn(e,t),o=[];for(let i=0;i<r.length;i++){let l=r[i],p=/^".*"$/.test(l)?l.slice(1,-1):l,h=un.join(p,e),m=!p&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;for(let E=0;E<n.length;E++){let S=m+n[E];try{if(ln.sync(S,{pathExt:s}))if(t.all)o.push(S);else return S}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw fn(e)};mn.exports=dn;dn.sync=li});var yn=v((uc,At)=>{"use strict";var gn=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};At.exports=gn;At.exports.default=gn});var Sn=v((lc,En)=>{"use strict";var bn=require("path"),fi=hn(),pi=yn();function xn(e,t){let r=e.options.env||process.env,n=process.cwd(),s=e.options.cwd!=null,o=s&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch{}let i;try{i=fi.sync(e.command,{path:r[pi({env:r})],pathExt:t?bn.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return i&&(i=bn.resolve(s?e.options.cwd:"",i)),i}function di(e){return xn(e)||xn(e,!0)}En.exports=di});var wn=v((fc,_t)=>{"use strict";var Rt=/([()\][%!^"`<>&|;, *?])/g;function mi(e){return e=e.replace(Rt,"^$1"),e}function hi(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Rt,"^$1"),t&&(e=e.replace(Rt,"^$1")),e}_t.exports.command=mi;_t.exports.argument=hi});var Rn=v((pc,An)=>{"use strict";An.exports=/^#!(.*)/});var Cn=v((dc,_n)=>{"use strict";var gi=Rn();_n.exports=(e="")=>{let t=e.match(gi);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),s=r.split("/").pop();return s==="env"?n:n?`${s} ${n}`:s}});var vn=v((mc,Tn)=>{"use strict";var Ct=require("fs"),yi=Cn();function bi(e){let r=Buffer.alloc(150),n;try{n=Ct.openSync(e,"r"),Ct.readSync(n,r,0,150,0),Ct.closeSync(n)}catch{}return yi(r.toString())}Tn.exports=bi});var In=v((hc,On)=>{"use strict";var xi=require("path"),Pn=Sn(),$n=wn(),Ei=vn(),Si=process.platform==="win32",wi=/\.(?:com|exe)$/i,Ai=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ri(e){e.file=Pn(e);let t=e.file&&Ei(e.file);return t?(e.args.unshift(e.file),e.command=t,Pn(e)):e.file}function _i(e){if(!Si)return e;let t=Ri(e),r=!wi.test(t);if(e.options.forceShell||r){let n=Ai.test(t);e.command=xi.normalize(e.command),e.command=$n.command(e.command),e.args=e.args.map(o=>$n.argument(o,n));let s=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${s}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Ci(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:_i(n)}On.exports=Ci});var Nn=v((gc,kn)=>{"use strict";var Tt=process.platform==="win32";function vt(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Ti(e,t){if(!Tt)return;let r=e.emit;e.emit=function(n,s){if(n==="exit"){let o=Ln(s,t,"spawn");if(o)return r.call(e,"error",o)}return r.apply(e,arguments)}}function Ln(e,t){return Tt&&e===1&&!t.file?vt(t.original,"spawn"):null}function vi(e,t){return Tt&&e===1&&!t.file?vt(t.original,"spawnSync"):null}kn.exports={hookChildProcess:Ti,verifyENOENT:Ln,verifyENOENTSync:vi,notFoundError:vt}});var Bn=v((yc,pe)=>{"use strict";var Hn=require("child_process"),Pt=In(),$t=Nn();function Gn(e,t,r){let n=Pt(e,t,r),s=Hn.spawn(n.command,n.args,n.options);return $t.hookChildProcess(s,n),s}function Pi(e,t,r){let n=Pt(e,t,r),s=Hn.spawnSync(n.command,n.args,n.options);return s.error=s.error||$t.verifyENOENTSync(s.status,n),s}pe.exports=Gn;pe.exports.spawn=Gn;pe.exports.sync=Pi;pe.exports._parse=Pt;pe.exports._enoent=$t});var ys=v((pu,gs)=>{"use strict";var{PassThrough:xa}=require("stream");gs.exports=function(){var e=[],t=new xa({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(r),t;function r(o){return Array.isArray(o)?(o.forEach(r),this):(e.push(o),o.once("end",s.bind(null,o)),o.once("error",t.emit.bind(t,"error")),o.pipe(t,{end:!1}),this)}function n(){return e.length==0}function s(o){e=e.filter(function(i){return i!==o}),!e.length&&t.readable&&t.end()}}});var ge=B(require("node:console"),1),ye=require("node:fs/promises"),oe=require("node:path"),rr=B(require("node:process"),1),Ws=require("node:util"),Ks=B(Or(),1);var Ir={bugs:"https://github.com/cedx/php-minifier/issues",description:"Minify PHP source code by removing comments and whitespace.",homepage:"https://github.com/cedx/php-minifier",license:"MIT",name:"@cedx/php-minifier",repository:"cedx/php-minifier",type:"module",version:"2.0.0",author:{email:"cedric@belin.io",name:"C\xE9dric Belin",url:"https://belin.io"},bin:{php_minifier:"./bin/php_minifier.cjs"},dependencies:{execa:"^8.0.1","fancy-log":"^2.0.0","get-port":"^7.0.0","plugin-error":"^2.0.1",readdirp:"^3.6.0"},devDependencies:{"@types/fancy-log":"^2.0.2","@types/gulp":"^4.0.17","@types/node":"=20.11.5","@types/vinyl":"^2.0.11","@typescript-eslint/eslint-plugin":"^6.19.1","@typescript-eslint/parser":"^6.19.1",esbuild:"^0.19.12",eslint:"^8.56.0",typedoc:"^0.25.7",typescript:"^5.3.3",vinyl:"^3.0.0"},engines:{node:">=20.0.0"},exports:{types:"./lib/index.d.ts",import:"./lib/index.js"},files:["lib/","src/","www/"],imports:{"#phpMinifier":{types:"./lib/index.d.ts",import:"./lib/index.js"}},keywords:["compress","gulp","gulpplugin","minify","php"],peerDependencies:{gulp:">=4.0.0"},scripts:{build:"tsc --project src/tsconfig.json && esbuild --allow-overwrite --bundle --legal-comments=none --log-level=info --minify --outfile=bin/php_minifier.cjs --platform=node src/cli/main.ts",clean:"node tool/clean.js",dist:"npm run clean && npm run build && node tool/dist.js && git update-index --chmod=+x bin/php_minifier.cjs",doc:"typedoc --options etc/typedoc.js && node tool/doc.js",lint:"tsc --project tsconfig.json && eslint --config=etc/eslint.cjs src test tool",postpublish:"node tool/publish.js",prepack:"npm run dist",start:"npm run build && node bin/php_minifier.cjs --help",test:"npm run build && node --test --test-reporter=spec"}};var Lr=`
Minify PHP source code by removing comments and whitespace.

Usage:
  php_minifier [options] <input> <output>

Arguments:
  input            The path to the input directory.
  output           The path to the output directory.

Options:
  -b, --binary     The path to the PHP executable.
  -e, --extension  The extension of the PHP files to process. Defaults to "php".
  -m, --mode       The operation mode of the minifier. Defaults to "safe".
  -s, --silent     Value indicating whether to silence the minifier output.
  -h, --help       Display this help.
  -v, --version    Output the version number.
`;var Da=B(Mr(),1),Ma=B(Vr(),1);var he=require("node:path"),qs=require("node:url");var Ns=require("node:buffer"),Hs=B(require("node:path"),1),it=B(require("node:child_process"),1),Ce=B(require("node:process"),1),Gs=B(Bn(),1);function Ot(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var Ae=B(require("node:process"),1),de=B(require("node:path"),1),It=B(require("node:url"),1);function Xe(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function $i(e={}){let{cwd:t=Ae.default.cwd(),path:r=Ae.default.env[Xe()],execPath:n=Ae.default.execPath}=e,s,o=n instanceof URL?It.default.fileURLToPath(n):n,i=t instanceof URL?It.default.fileURLToPath(t):t,l=de.default.resolve(i),p=[];for(;s!==l;)p.push(de.default.join(l,"node_modules/.bin")),s=l,l=de.default.resolve(l,"..");return p.push(de.default.resolve(i,o,"..")),[...p,r].join(de.default.delimiter)}function Dn({env:e=Ae.default.env,...t}={}){e={...e};let r=Xe({env:e});return t.path=e[r],e[r]=$i(t),e}var Oi=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!Ii(s,o)&&n||Object.defineProperty(e,r,o)},Ii=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Li=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},ki=(e,t)=>`/* Wrapped ${e}*/
${t}`,Ni=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Hi=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Gi=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,s=ki.bind(null,n,t.toString());Object.defineProperty(s,"name",Hi),Object.defineProperty(e,"toString",{...Ni,value:s})};function Lt(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let s of Reflect.ownKeys(t))Oi(e,t,s,r);return Li(e,t),Gi(e,t,n),e}var ze=new WeakMap,Mn=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,s=e.displayName||e.name||"<anonymous>",o=function(...i){if(ze.set(o,++n),n===1)r=e.apply(this,i),e=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return Lt(o,e),ze.set(o,n),o};Mn.callCount=e=>{if(!ze.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return ze.get(e)};var Fn=Mn;var Vn=B(require("node:process"),1);var Xn=require("node:os");var Un=()=>{let e=qn-jn+1;return Array.from({length:e},Bi)},Bi=(e,t)=>({name:`SIGRT${t+1}`,number:jn+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),jn=34,qn=64;var Kn=require("node:os");var Wn=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var kt=()=>{let e=Un();return[...Wn,...e].map(Di)},Di=({name:e,number:t,description:r,action:n,forced:s=!1,standard:o})=>{let{signals:{[e]:i}}=Kn.constants,l=i!==void 0;return{name:e,number:l?i:t,description:r,supported:l,action:n,forced:s,standard:o}};var Mi=()=>{let e=kt();return Object.fromEntries(e.map(Fi))},Fi=({name:e,number:t,description:r,supported:n,action:s,forced:o,standard:i})=>[e,{name:e,number:t,description:r,supported:n,action:s,forced:o,standard:i}],zn=Mi(),Ui=()=>{let e=kt(),t=65,r=Array.from({length:t},(n,s)=>ji(s,e));return Object.assign({},...r)},ji=(e,t)=>{let r=qi(e,t);if(r===void 0)return{};let{name:n,description:s,supported:o,action:i,forced:l,standard:p}=r;return{[e]:{name:n,number:e,description:s,supported:o,action:i,forced:l,standard:p}}},qi=(e,t)=>{let r=t.find(({name:n})=>Xn.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},Oc=Ui();var Wi=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:s,exitCode:o,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${s})`:o!==void 0?`failed with exit code ${o}`:"failed",Re=({stdout:e,stderr:t,all:r,error:n,signal:s,exitCode:o,command:i,escapedCommand:l,timedOut:p,isCanceled:h,killed:m,parsed:{options:{timeout:E,cwd:S=Vn.default.cwd()}}})=>{o=o===null?void 0:o,s=s===null?void 0:s;let R=s===void 0?void 0:zn[s].description,y=n&&n.code,F=`Command ${Wi({timedOut:p,timeout:E,errorCode:y,signal:s,signalDescription:R,exitCode:o,isCanceled:h})}: ${i}`,U=Object.prototype.toString.call(n)==="[object Error]",M=U?`${F}
${n.message}`:F,C=[M,t,e].filter(Boolean).join(`
`);return U?(n.originalMessage=n.message,n.message=C):n=new Error(C),n.shortMessage=M,n.command=i,n.escapedCommand=l,n.exitCode=o,n.signal=s,n.signalDescription=R,n.stdout=e,n.stderr=t,n.cwd=S,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!p,n.isCanceled=h,n.killed=m&&!p,n};var Ve=["stdin","stdout","stderr"],Ki=e=>Ve.some(t=>e[t]!==void 0),Yn=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Ve.map(n=>e[n]);if(Ki(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Ve.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Ve.length);return Array.from({length:r},(n,s)=>t[s])};var Zn=B(require("node:os"),1);var se=[];se.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&se.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&se.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var Ye=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Nt=Symbol.for("signal-exit emitter"),Ht=globalThis,Xi=Object.defineProperty.bind(Object),Gt=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Ht[Nt])return Ht[Nt];Xi(Ht,Nt,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},Qe=class{},zi=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Bt=class extends Qe{onExit(){return()=>{}}load(){}unload(){}},Dt=class extends Qe{#n=Mt.platform==="win32"?"SIGINT":"SIGHUP";#t=new Gt;#e;#r;#i;#o={};#s=!1;constructor(t){super(),this.#e=t,this.#o={};for(let r of se)this.#o[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let i=this.#t.emit("exit",null,r),l=r==="SIGHUP"?this.#n:r;i||t.kill(t.pid,l)}};this.#i=t.reallyExit,this.#r=t.emit}onExit(t,r){if(!Ye(this.#e))return()=>{};this.#s===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#s){this.#s=!0,this.#t.count+=1;for(let t of se)try{let r=this.#o[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#c(t,...r),this.#e.reallyExit=t=>this.#a(t)}}unload(){this.#s&&(this.#s=!1,se.forEach(t=>{let r=this.#o[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#r,this.#e.reallyExit=this.#i,this.#t.count-=1)}#a(t){return Ye(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#c(t,...r){let n=this.#r;if(t==="exit"&&Ye(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},Mt=globalThis.process,{onExit:Qn,load:Bc,unload:Dc}=zi(Ye(Mt)?new Dt(Mt):new Bt);var Vi=1e3*5,Jn=(e,t="SIGTERM",r={})=>{let n=e(t);return Yi(e,t,r,n),n},Yi=(e,t,r,n)=>{if(!Qi(t,r,n))return;let s=Ji(r),o=setTimeout(()=>{e("SIGKILL")},s);o.unref&&o.unref()},Qi=(e,{forceKillAfterTimeout:t},r)=>Zi(e)&&t!==!1&&r,Zi=e=>e===Zn.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Ji=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Vi;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},es=(e,t)=>{e.kill()&&(t.isCanceled=!0)},ea=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},ts=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let s,o=new Promise((l,p)=>{s=setTimeout(()=>{ea(e,r,p)},t)}),i=n.finally(()=>{clearTimeout(s)});return Promise.race([o,i])},rs=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},ns=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let s=Qn(()=>{e.kill()});return n.finally(()=>{s()})};var ss=require("node:fs"),os=require("node:child_process");function Ze(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Ft(e){return Ze(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}var ta=e=>e instanceof os.ChildProcess&&typeof e.then=="function",Ut=(e,t,r)=>{if(typeof r=="string")return e[t].pipe((0,ss.createWriteStream)(r)),e;if(Ft(r))return e[t].pipe(r),e;if(!ta(r))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!Ft(r.stdin))throw new TypeError("The target child process's stdin must be available.");return e[t].pipe(r.stdin),r},is=e=>{e.stdout!==null&&(e.pipeStdout=Ut.bind(void 0,e,"stdout")),e.stderr!==null&&(e.pipeStderr=Ut.bind(void 0,e,"stderr")),e.all!==void 0&&(e.pipeAll=Ut.bind(void 0,e,"all"))};var st=require("node:fs"),bs=require("node:timers/promises");var _e=async(e,{init:t,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,finalize:l},{maxBuffer:p=Number.POSITIVE_INFINITY}={})=>{if(!na(e))throw new Error("The first argument must be a Readable, a ReadableStream, or an async iterable.");let h=t();h.length=0;try{for await(let m of e){let E=sa(m),S=r[E](m,h);us({convertedChunk:S,state:h,getSize:n,truncateChunk:s,addChunk:o,maxBuffer:p})}return ra({state:h,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,maxBuffer:p}),l(h)}catch(m){throw m.bufferedData=l(h),m}},ra=({state:e,getSize:t,truncateChunk:r,addChunk:n,getFinalChunk:s,maxBuffer:o})=>{let i=s(e);i!==void 0&&us({convertedChunk:i,state:e,getSize:t,truncateChunk:r,addChunk:n,maxBuffer:o})},us=({convertedChunk:e,state:t,getSize:r,truncateChunk:n,addChunk:s,maxBuffer:o})=>{let i=r(e),l=t.length+i;if(l<=o){as(e,t,s,l);return}let p=n(e,o-t.length);throw p!==void 0&&as(p,t,s,o),new Je},as=(e,t,r,n)=>{t.contents=r(e,t,n),t.length=n},na=e=>typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function",sa=e=>{let t=typeof e;if(t==="string")return"string";if(t!=="object"||e===null)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=cs.call(e);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&cs.call(e.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:cs}=Object.prototype,Je=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var jt=e=>e,qt=()=>{},Wt=({contents:e})=>e,et=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},tt=e=>e.length;async function Kt(e,t){return _e(e,da,t)}var oa=()=>({contents:new ArrayBuffer(0)}),ia=e=>aa.encode(e),aa=new TextEncoder,ls=e=>new Uint8Array(e),fs=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),ca=(e,t)=>e.slice(0,t),ua=(e,{contents:t,length:r},n)=>{let s=ms()?fa(t,n):la(t,n);return new Uint8Array(s).set(e,r),s},la=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(ds(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},fa=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:ds(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},ds=e=>ps**Math.ceil(Math.log(e)/Math.log(ps)),ps=2,pa=({contents:e,length:t})=>ms()?e:e.slice(0,t),ms=()=>"resize"in ArrayBuffer.prototype,da={init:oa,convertChunk:{string:ia,buffer:ls,arrayBuffer:ls,dataView:fs,typedArray:fs,others:et},getSize:tt,truncateChunk:ca,addChunk:ua,getFinalChunk:qt,finalize:pa};async function rt(e,t){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return hs(await Kt(e,t))}catch(r){throw r.bufferedData!==void 0&&(r.bufferedData=hs(r.bufferedData)),r}}var hs=e=>globalThis.Buffer.from(e);async function Xt(e,t){return _e(e,ba,t)}var ma=()=>({contents:"",textDecoder:new TextDecoder}),nt=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),ha=(e,{contents:t})=>t+e,ga=(e,t)=>e.slice(0,t),ya=({textDecoder:e})=>{let t=e.decode();return t===""?void 0:t},ba={init:ma,convertChunk:{string:jt,buffer:nt,arrayBuffer:nt,dataView:nt,typedArray:nt,others:et},getSize:tt,truncateChunk:ga,addChunk:ha,getFinalChunk:ya,finalize:Wt};var xs=B(ys(),1),Es=e=>{if(e!==void 0)throw new TypeError("The `input` and `inputFile` options cannot be both set.")},Ea=({input:e,inputFile:t})=>typeof t!="string"?e:(Es(e),(0,st.readFileSync)(t)),Ss=e=>{let t=Ea(e);if(Ze(t))throw new TypeError("The `input` option cannot be a stream in sync mode");return t},Sa=({input:e,inputFile:t})=>typeof t!="string"?e:(Es(e),(0,st.createReadStream)(t)),ws=(e,t)=>{let r=Sa(t);r!==void 0&&(Ze(r)?r.pipe(e.stdin):e.stdin.end(r))},As=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,xs.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},zt=async(e,t)=>{if(!(!e||t===void 0)){await(0,bs.setTimeout)(0),e.destroy();try{return await t}catch(r){return r.bufferedData}}},Vt=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t==="utf8"||t==="utf-8"?Xt(e,{maxBuffer:n}):t===null||t==="buffer"?rt(e,{maxBuffer:n}):wa(e,n,t)},wa=async(e,t,r)=>(await rt(e,{maxBuffer:t})).toString(r),Rs=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:s,maxBuffer:o},i)=>{let l=Vt(e,{encoding:n,buffer:s,maxBuffer:o}),p=Vt(t,{encoding:n,buffer:s,maxBuffer:o}),h=Vt(r,{encoding:n,buffer:s,maxBuffer:o*2});try{return await Promise.all([i,l,p,h])}catch(m){return Promise.all([{error:m,signal:m.signal,timedOut:m.timedOut},zt(e,l),zt(t,p),zt(r,h)])}};var Aa=(async()=>{})().constructor.prototype,Ra=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Aa,e)]),Yt=(e,t)=>{for(let[r,n]of Ra){let s=typeof t=="function"?(...o)=>Reflect.apply(n.value,t(),o):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:s})}},_s=e=>new Promise((t,r)=>{e.on("exit",(n,s)=>{t({exitCode:n,signal:s})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});var vs=require("node:buffer"),Ps=require("node:child_process"),$s=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],_a=/^[\w.-]+$/,Ca=e=>typeof e!="string"||_a.test(e)?e:`"${e.replaceAll('"','\\"')}"`,Qt=(e,t)=>$s(e,t).join(" "),Zt=(e,t)=>$s(e,t).map(r=>Ca(r)).join(" "),Ta=/ +/g;var Cs=e=>{let t=typeof e;if(t==="string")return e;if(t==="number")return String(e);if(t==="object"&&e!==null&&!(e instanceof Ps.ChildProcess)&&"stdout"in e){let r=typeof e.stdout;if(r==="string")return e.stdout;if(vs.Buffer.isBuffer(e.stdout))return e.stdout.toString();throw new TypeError(`Unexpected "${r}" stdout in template expression`)}throw new TypeError(`Unexpected "${t}" in template expression`)},Ts=(e,t,r)=>r||e.length===0||t.length===0?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],va=({templates:e,expressions:t,tokens:r,index:n,template:s})=>{let o=s??e.raw[n],i=o.split(Ta).filter(Boolean),l=Ts(r,i,o.startsWith(" "));if(n===t.length)return l;let p=t[n],h=Array.isArray(p)?p.map(m=>Cs(m)):[Cs(p)];return Ts(l,h,o.endsWith(" "))},Jt=(e,t)=>{let r=[];for(let[n,s]of e.entries())r=va({templates:e,expressions:t,tokens:r,index:n,template:s});return r};var Os=require("node:util"),Is=B(require("node:process"),1),Ls=(0,Os.debuglog)("execa").enabled,ot=(e,t)=>String(e).padStart(t,"0"),Pa=()=>{let e=new Date;return`${ot(e.getHours(),2)}:${ot(e.getMinutes(),2)}:${ot(e.getSeconds(),2)}.${ot(e.getMilliseconds(),3)}`},er=(e,{verbose:t})=>{t&&Is.default.stderr.write(`[${Pa()}] ${e}
`)};var $a=1e3*1e3*100,Oa=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:s})=>{let o=t?{...Ce.default.env,...e}:e;return r?Dn({env:o,cwd:n,execPath:s}):o},Bs=(e,t,r={})=>{let n=Gs.default._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:$a,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||Ce.default.cwd(),execPath:Ce.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:Ls,...r},r.env=Oa(r),r.stdio=Yn(r),Ce.default.platform==="win32"&&Hs.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},Te=(e,t,r)=>typeof t!="string"&&!Ns.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Ot(t):t;function ve(e,t,r){let n=Bs(e,t,r),s=Qt(e,t),o=Zt(e,t);er(o,n.options),rs(n.options);let i;try{i=it.default.spawn(n.file,n.args,n.options)}catch(R){let y=new it.default.ChildProcess,w=Promise.reject(Re({error:R,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Yt(y,w),y}let l=_s(i),p=ts(i,n.options,l),h=ns(i,n.options,p),m={isCanceled:!1};i.kill=Jn.bind(null,i.kill.bind(i)),i.cancel=es.bind(null,i,m);let S=Fn(async()=>{let[{error:R,exitCode:y,signal:w,timedOut:F},U,M,C]=await Rs(i,n.options,h),K=Te(n.options,U),N=Te(n.options,M),V=Te(n.options,C);if(R||y!==0||w!==null){let G=Re({error:R,exitCode:y,signal:w,stdout:K,stderr:N,all:V,command:s,escapedCommand:o,parsed:n,timedOut:F,isCanceled:m.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:i.killed});if(!n.options.reject)return G;throw G}return{command:s,escapedCommand:o,exitCode:0,stdout:K,stderr:N,all:V,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ws(i,n.options),i.all=As(i,n.options),is(i),Yt(i,S),i}function Ia(e,t,r){let n=Bs(e,t,r),s=Qt(e,t),o=Zt(e,t);er(o,n.options);let i=Ss(n.options),l;try{l=it.default.spawnSync(n.file,n.args,{...n.options,input:i})}catch(m){throw Re({error:m,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let p=Te(n.options,l.stdout,l.error),h=Te(n.options,l.stderr,l.error);if(l.error||l.status!==0||l.signal!==null){let m=Re({stdout:p,stderr:h,error:l.error,signal:l.signal,exitCode:l.status,command:s,escapedCommand:o,parsed:n,timedOut:l.error&&l.error.code==="ETIMEDOUT",isCanceled:!1,killed:l.signal!==null});if(!n.options.reject)return m;throw m}return{command:s,escapedCommand:o,exitCode:0,stdout:p,stderr:h,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}var La=({input:e,inputFile:t,stdio:r})=>e===void 0&&t===void 0&&r===void 0?{stdin:"inherit"}:{},ks=(e={})=>({preferLocal:!0,...La(e),...e});function Ds(e){function t(r,...n){if(!Array.isArray(r))return Ds({...e,...r});let[s,...o]=Jt(r,n);return ve(s,o,ks(e))}return t.sync=(r,...n)=>{if(!Array.isArray(r))throw new TypeError("Please use $(options).sync`command` instead of $.sync(options)`command`.");let[s,...o]=Jt(r,n);return Ia(s,o,ks(e))},t}var Iu=Ds();var Us=B(require("node:net"),1),js=B(require("node:os"),1),at=class extends Error{constructor(t){super(`${t} is locked`)}},me={old:new Set,young:new Set},ka=1e3*15;var Pe,Na=()=>{let e=js.default.networkInterfaces(),t=new Set([void 0,"0.0.0.0"]);for(let r of Object.values(e))for(let n of r)t.add(n.address);return t},Ms=e=>new Promise((t,r)=>{let n=Us.default.createServer();n.unref(),n.on("error",r),n.listen(e,()=>{let{port:s}=n.address();n.close(()=>{t(s)})})}),Fs=async(e,t)=>{if(e.host||e.port===0)return Ms(e);for(let r of t)try{await Ms({port:e.port,host:r})}catch(n){if(!["EADDRNOTAVAIL","EINVAL"].includes(n.code))throw n}return e.port},Ha=function*(e){e&&(yield*e),yield 0};async function tr(e){let t,r=new Set;if(e&&(e.port&&(t=typeof e.port=="number"?[e.port]:e.port),e.exclude)){let s=e.exclude;if(typeof s[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let o of s){if(typeof o!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(o))throw new TypeError(`Number ${o} in the exclude option is not a safe integer and can't be used`)}r=new Set(s)}Pe===void 0&&(Pe=setTimeout(()=>{Pe=void 0,me.old=me.young,me.young=new Set},ka),Pe.unref&&Pe.unref());let n=Na();for(let s of Ha(t))try{if(r.has(s))continue;let o=await Fs({...e,port:s},n);for(;me.old.has(o)||me.young.has(o);){if(s!==0)throw new at(s);o=await Fs({...e,port:s},n)}return me.young.add(o),o}catch(o){if(!["EADDRINUSE","EACCES"].includes(o.code)&&!(o instanceof at))throw o}throw new Error("No available ports found")}var Ga={},$e=class e{static#n="127.0.0.1";#t;#e=-1;#r=null;constructor(t="php"){this.#t=(0,he.normalize)(t)}close(){return this.#r?.kill(),this.#r=null,Promise.resolve()}async listen(){return this.#r?this.#e:(this.#e=await tr(),new Promise((t,r)=>{let n=typeof module>"u"?(0,qs.fileURLToPath)(new URL("../www",Ga.url)):(0,he.join)(__dirname,"../www"),s=["-S",`${e.#n}:${this.#e}`,"-t",n];this.#r=ve(this.#t,s),this.#r.on("error",r),setTimeout(()=>t(this.#e),1e3)}))}async transform(t){let r=await this.listen(),n=new URL(`http://${e.#n}:${r}/index.php`);n.searchParams.set("file",(0,he.resolve)(t));let s=await fetch(n);if(!s.ok)throw new Error(`An error occurred while processing the script: ${t}`);return s.text()}};var ct=require("node:path");var Oe=class{#n;constructor(t="php"){this.#n=(0,ct.normalize)(t)}close(){return Promise.resolve()}async transform(t){return(await ve(this.#n,["-w",(0,ct.resolve)(t)])).stdout}};async function Fa(){let{positionals:e,values:t}=(0,Ws.parseArgs)({allowPositionals:!0,options:{binary:{short:"b",type:"string",default:"php"},extension:{short:"e",type:"string",default:"php"},help:{short:"h",type:"boolean",default:!1},mode:{short:"m",type:"string",default:"safe"},silent:{short:"s",type:"boolean",default:!1},version:{short:"v",type:"boolean",default:!1}}});if(t.help||t.version)return ge.default.log(t.version?Ir.version:Lr.trim()),0;if(!e.length)return ge.default.error("You must provide the path to the input directory."),1;let r=(0,oe.resolve)(e[0]);try{await(0,ye.access)(r)}catch{return ge.default.error("The input directory was not found."),2}let n=e.length>1?(0,oe.resolve)(e[1]):r;return await Ua(r,n,t),0}async function Ua(e,t,r={}){let n=r.binary??"php",s=r.extension??"php",o=r.mode??"safe",i=r.silent??!1,l=o=="fast"?new $e(n):new Oe(n);for await(let p of(0,Ks.default)(e,{fileFilter:`*.${s}`})){i||ge.default.log(`Minifying: ${p.path}`);let h=await l.transform(p.fullPath),m=(0,oe.join)(t,p.path);await(0,ye.mkdir)((0,oe.dirname)(m),{recursive:!0}),await(0,ye.writeFile)(m,h)}return l.close()}Fa().then(e=>rr.default.exitCode=e,e=>{ge.default.error(e instanceof Error?e.message:e),rr.default.exitCode=1});
